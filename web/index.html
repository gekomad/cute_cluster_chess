<!doctype html>
<html lang="en">
<head>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
    <title>Cute Cluster Chess Testing Framework</title>


    <link rel="stylesheet" href="css/bootstrap.5.3.1.min.css">
    <link rel="stylesheet" href="css/jquery-ui.css">

    <link rel="stylesheet" href="/css/application.css">

    <script src="js/jquery.3.7.1.min.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/servers_scripts.js"></script>
    <script src="js/tests_scripts.js"></script>
    <script src="js/ccc.js"></script>
    <script src="js/cute_main_param.js"></script>

    <script src="js/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>


</head>
<body onload="startup(true)">
<header class="navbar-expand-lg sticky-top shadow-sm">
    <button id="id_show_test_list_button" onclick="show_test_list();" type="button" class="btn">Tests</button>
    <button id="id_show_suspended_list_button" onclick="show_suspended_list();" type="button" class="btn">Suspended
    </button>
    <button id="id_show_failed_list_button" onclick="show_failed_list();" type="button" class="btn">Failed</button>
    <button id="id_show_server_list_button" onclick="show_server_list();" type="button" class="btn">Cluster</button>
    <button id="id_show_settings_button" onclick="show_settings();" type="button" class="btn">Settings</button>
</header>
<div id="overlay" class="d-none">
    <div class="overlay-content">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>
<div id="dialog" title="Startup">
    <p id="dialog_box"></p>
</div>
<div class="container-fluid px-0">

    <!-- server_list ------------------------------------------------------------------------------->

    <div class="container-fluid" id="server_list">
        <h4>Nodes</h4>
        <h5>Last update <span id="time_stamp_server" class="label label-default"></span></h5>
        <button id="restart_all_server_id" onclick="restart_all_server_list();" type="button" class="btn btn-danger">
            Restart All
        </button>
        <button id="stop_all_server_id" onclick="stop_all_server_list();" type="button" class="btn btn-danger">
            Stop All
        </button>
        <button id="start_all_server_id" onclick="start_all_server_list();" type="button" class="btn btn-danger">
            Start All
        </button>
        <div class="table-responsive-lg">
            <table id="contributors_table" class="table table-striped table-sm">
                <thead class="sticky-top">
                <tr>
                    <th>#</th>
                    <th>id</th>
                    <th>IP</th>
                    <th class="text-end">Tot games</th>
                    <th class="text-end">Load avarage</th>
                    <th class="text-end">Current test</th>
                    <th class="text-end">#cpu</th>
                    <th class="text-end">Cutechess</th>
                    <th class="text-end">Stopped</th>
                    <th></th>
                    <th></th>
                </tr>
                </thead>
                <tbody id="server_dynamic_list"></tbody>
            </table>
        </div>
        <div>
            <!--    add node-->
            <p>
                <a class="btn btn-dark" data-toggle="collapse" href="#collapseExample" role="button"
                   aria-expanded="false" aria-controls="collapseExample">
                    Add new node
                </a>

            </p>
            <div class="collapse" id="collapseExample">
                <div class="card card-body">

                    <form id="add_node_id">
                        <div class="form-group row">
                            <label for="inputIP" class="col-sm-2 col-form-label">IP</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="inputIP" placeholder="IP/Host">
                            </div>
                            <small id="errIP" style="color:red">&ensp;Enter data</small>
                        </div>
                        <div class="form-group row">
                            <label for="inputUser" class="col-sm-2 col-form-label">User</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="inputUser" placeholder="User">
                            </div>
                            <small id="errUser" style="color:red">&ensp;Enter data</small>
                        </div>

                        <div class="form-group row">
                            <label for="inputPort" class="col-sm-2 col-form-label">Port</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="inputPort" placeholder="22">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="inputPassword3" class="col-sm-2 col-form-label">Password</label>
                            <div class="col-sm-10">
                                <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
                            </div>
                            <small id="errPassword" style="color:red">&ensp;Enter data</small>
                        </div>
                        <div class="form-group row">
                            <label for="cpus" class="col-sm-2 col-form-label">CPUs:</label>
                            <div class="col-sm-10">
                                <select name="cpus" id="cpus">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">5</option>
                                    <option value="5">6</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option selected="selected" value="All_1">All-1</option>
                                    <option value="All">All</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row"></div>
                        <button id="add_node_button_id" onclick="add_node();" type="button" class="btn btn-dark">Add
                            node

                        </button>

                    </form>
                    <!--    end add node-->
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row" id="settings_id">

            <!--            cute_main_param-->
            <form>


                <div class="form-group">
                    <label for="repoInput">Github repository</label>
                    <input type="text" class="form-control" id="repoInput"
                           placeholder="git@github.com:you/your_engine.git">
                    <small class="form-text text-muted"></small> <small id="errRepo" style="color:red">&ensp;Enter
                    data</small>
                </div>
                <div class="form-group">
                    <label for="baseInput">Github base branch</label>
                    <input disabled type="text" class="form-control" id="baseInput" placeholder="base">
                    <small class="form-text text-muted">The 'base' git branch must exist on your repository</small>
                </div>
                <div class="form-group"><label for="prefixBranchInput">Prefix test branch</label><input disabled
                                                                                                        type="text"
                                                                                                        class="form-control"
                                                                                                        id="prefixBranchInput"
                                                                                                        placeholder="_test_/">
                    <small class="form-text text-muted">Create almost a branch with prefix '_test_/', example
                        _test_/null_move' </small></div>

                <div class="form-group"><label for="openingInput">Opening epd file</label>
                    <select id="openingInput" class="form-control">

                    </select>

                    <small class="form-text text-muted">You can add new epd file in `cute_cluster_chess/epd` on server
                        and
                        restart it</small></div>
                <div class="form-group"><label for="resignInput">Resign</label><input type="text" class="form-control"
                                                                                      id="resignInput"
                                                                                      placeholder="-resign movecount=6 score=1000">
                    <small class="form-text text-muted">resign parameter of cutechess-cli</small></div>
                <div class="form-group"><label for="drawInput">Draw</label><input type="text" class="form-control"
                                                                                  id="drawInput"
                                                                                  placeholder="-draw movenumber=34 movecount=8 score=20">
                    <small class="form-text text-muted">draw parameter of cutechess-cli</small></div>
                <div class="form-group"><label for="tcInput">Time Control</label><input type="text" class="form-control"
                                                                                        id="tcInput"
                                                                                        placeholder="0/0:120+1.0">
                    <small class="form-text text-muted">tc parameter of cutechess-cli</small><small id="errTC"
                                                                                                    style="color:red">&ensp;Enter
                        data</small></div>
                <div class="form-group"><label for="hashSizeInput">Hash size</label><input type="text"
                                                                                           class="form-control"
                                                                                           id="hashSizeInput"
                                                                                           placeholder="256"> <small
                        class="form-text text-muted">option.Hash of cutechess-cli</small><small id="errHash"
                                                                                                style="color:red">&ensp;Enter
                    data</small></div>
                <div class="form-group"><label for="concurrencyInput">Concurrency</label><input type="text"
                                                                                                class="form-control"
                                                                                                id="concurrencyInput"
                                                                                                placeholder="1"> <small
                        class="form-text text-muted">cutechess-cli instances</small></small><small id="errConcurrency"
                                                                                                   style="color:red">&ensp;Enter
                    data</small></div>
                <div class="form-group"><label for="variantInput">Variant</label><input type="text" class="form-control"
                                                                                        id="variantInput"
                                                                                        placeholder="fischerandom">
                    <small class="form-text text-muted">variant parameter of cutechess-cli</small></div>
                <div class="form-group"><label for="totMatchInput">Tot Games</label><input type="text"
                                                                                           class="form-control"
                                                                                           id="totMatchInput"
                                                                                           placeholder="8000"> <small
                        class="form-text text-muted">Total games</small><small id="errTotGames" style="color:red">&ensp;Enter
                    data</small></div>
                <div class="form-group"><label for="pathSrcInput">Path to compile</label><input type="text"
                                                                                                class="form-control"
                                                                                                id="pathSrcInput"
                                                                                                placeholder="src">
                    <small class="form-text text-muted">src, . for rust project</small><small id="errSrc"
                                                                                              style="color:red">&ensp;Enter
                        either aarch64 or x86_64</small></div>
                <div class="form-group"><label for="makeCommandX86_64Input">Build command x86_64</label><input
                        type="text"
                        class="form-control"
                        id="makeCommandX86_64Input"
                        placeholder="make arch123">
                    <small class="form-text text-muted">make, cmake, cargo build --release, etc</small><small
                            id="errMakeX64"
                            style="color:red">&ensp;Enter
                        data</small></div>
                <div class="form-group"><label for="makeCommandAarch64Input">Build command aarch64</label><input
                        type="text"
                        class="form-control"
                        id="makeCommandAarch64Input"
                        placeholder="make arch123">
                    <small class="form-text text-muted">make, cmake, cargo build --release, etc</small><small
                            id="errAarc"
                            style="color:red">&ensp;Enter
                        data</small></div>

                <div class="form-group"><label for="pathExeInput">exe Relative Path </label><input type="text"
                                                                                                  class="form-control"
                                                                                                  id="pathExeInput"
                                                                                                  placeholder="src/my_engine, target/release/my_engine">
                    <small class="form-text text-muted">executable path</small><small id="errExe" style="color:red">&ensp;Enter
                        either aarch64 or x86_64</small></div>
                <div class="form-group"><label for="firstParamInput">First param</label><input type="text"
                                                                                               class="form-control"
                                                                                               id="firstParamInput"
                                                                                               placeholder="option.FOO=BAR">
                    <small class="form-text text-muted">cutechess-cli parameter of first engine</small></div>
                <div class="form-group"><label for="secondParamInput">Second param</label><input type="text"
                                                                                                 class="form-control"
                                                                                                 id="secondParamInput"
                                                                                                 placeholder="option.FOO=BAR">
                    <small class="form-text text-muted">cutechess-cli parameter of second engine</small></div>


            </form>
        </div>
    </div>
    <!-------------test_list ------------------------------------------------------------------------------->
    <div class="container-fluid">
        <div class="row" id="test_list">
            <div>
                <h4 id="id_test_failed">Tests</h4>
                <h5>Last update <span id="time_stamp_test" class="label label-default"></span></h5>
                <div class="table-responsive-lg">
                    <table class="table table-striped table-sm run-table">
                        <thead class="sticky-top">
                        <tr>
                            <th>Score</th>
                            <th>Branch</th>
                            <th>Commit</th>
                            <th>Error</th>
                            <th>Date</th>
                            <th>PGN file</th>
                            <th></th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody id="test_dynamic_list">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
        <!------------- ------------------------------------------------------------------------------->
        <div class="col-12">
            <button id="refresh_button" onclick="refresh();" type="button" class="btn btn-primary">Refresh</button>
            <i class="bi bi-bootstrap-reboot"></i>
        </div>

    </div>
</div>
</body>
</html>

